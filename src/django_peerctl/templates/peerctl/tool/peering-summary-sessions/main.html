{% load static i18n %}
<div class="tool" data-component="peering_summary-sessions">
  <div data-element="menu" class="center">
    <a class="button" data-element="btn_add_peer_session"><span class="icon fullctl icon-add"></span><span class="fullctl label">{% trans "Add Session" %}</span></a>

    <a class="button" data-element="btn_api_view"><span class="icon fullctl icon-list"></span><span class="fullctl label">{% trans "API View" %}</span></a>
  </div>
  <div class="marg-top-lg"></div>
  <table
  class="table list-table table-borderless"
  data-api-load="yes"
  data-api-base="{% url "peerctl_api:sessions_summary-list" asn=selected_asn %}"
  data-template="list">
  <thead>
      <tr>
      <th>{% trans "ASN" %}</th>
      <th>{% trans "Ip" %}</th>
      <th>{% trans "Policy IPv4" %}</th>
      <th>{% trans "Policy IPv6" %}</th>
      <th>{% trans "Port" %}</th>
      <th>{% trans "Device" %}</th>
      <th></th>
      </tr>
  </thead>

  <tbody class="list-body">
  </tbody>

  <tbody class="templates">
      <tr data-template="row" class="with-border">
        <td data-field="peer_asn" class="highlight"></td>

        <td>
          <div data-field="peer_ip4"></div>
          <div data-field="peer_ip6"></div>
        </td>
        <td class="secondary">
            <select
              data-api-base="/"
              data-api-method="put"
              data-api-load="yes"
              data-api-action="{% url "peerctl_api:peer_session-set-policy" asn=selected_asn port_pk="port_id" pk="peer_session_id" %}"
              class="peer_session-policy-4"
              data-proxy-data=".port-policy-4"></select>
        </td>
        <td class="secondary">

            <select
              data-api-base="/"
              data-api-method="put"
              data-api-load="yes"
              data-api-action="{% url "peerctl_api:peer_session-set-policy" asn=selected_asn port_pk="port_id" pk="peer_session_id" %}"
              class="peer_session-policy-6"
              data-proxy-data=".port-policy-6"></select>

        </td>
        <td data-field="port_display_name"></td>
        <td data-field="device_name"></td>
        <td class="control">
        	<a class="button"
            data-api-action="{id}"
            data-api-callback="remove"
            data-confirm="Remove peer session?"
            data-api-method="DELETE"><span class="icon fullctl icon-delete"></span><span class="fullctl label">{% trans "Delete" %}</span>
          </a>
        </td>
      </tr>
  </tbody>
  </table>

  <div class="templates">
    <div data-template="menu"></div>

    {% include "peerctl/tool/peering-summary-sessions/form-manual-session.html" %}
  </div>
</div>
