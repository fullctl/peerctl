{% load static i18n %}
<div class="tool" data-component="peering_summary-sessions">
  <div data-element="menu" class="row">
  </div>

  <div class="row">
  <table
  class="table list-table table-borderless center"
  data-api-load="yes"
  data-api-base="{% url "peerctl_api:sessions_summary-list" asn=selected_asn %}"
  data-template="list">
  <thead>
      <tr>
        <th>{% trans "ASN" %}</th>
        <th>{% trans "IP" %}</th>
        <th>{% trans "Policy IPv4" %}</th>
        <th>{% trans "Policy IPv6" %}</th>
        <th>{% trans "Port" %}</th>
        <th>{% trans "Device" %}</th>
        <th>{% trans "Options" %}</th>
      </tr>
  </thead>

  <tbody class="list-body">
  </tbody>

  <tbody class="templates">
      <tr data-template="row" class="with-border">
        <td data-field="peer_asn" class="highlight"></td>

        <td>
          <div data-field="peer_ip4"></div>
          <div data-field="peer_ip6"></div>
        </td>
        <td class="secondary">

          <div class="dropdown">
            <button type="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="button dropdown-toggle" data-element="edit_policy4">
              <span class="fullctl label" data-field="policy4_name"></span>
            </button>
            <div class="dropdown-menu">
              <a class="dropdown-item">
              <select
                style="overflow:hidden; background: transparent;"
                data-api-base="/"
                data-api-method="put"
                data-api-action="{% url "peerctl_api:peer_session-set-policy" asn=selected_asn port_pk="port_id" pk="peer_session_id" %}"
                class="peer_session-policy-4"
                data-proxy-data=".port-policy-4">
              </select>
              </a>
            </div>
          </div>

        </td>
        <td class="secondary">

          <div class="dropdown">
            <button type="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="button dropdown-toggle" data-element="edit_policy6">
              <span class="fullctl label" data-field="policy6_name"></span>
            </button>
            <div class="dropdown-menu">
              <a class="dropdown-item">
              <select
                style="overflow:hidden; background: transparent;"
                data-api-base="/"
                data-api-method="put"
                data-api-action="{% url "peerctl_api:peer_session-set-policy" asn=selected_asn port_pk="port_id" pk="peer_session_id" %}"
                class="peer_session-policy-6"
                data-proxy-data=".port-policy-6">
              </select>
              </a>
            </div>
          </div>



        </td>
        <td data-field="port_display_name"></td>
        <td data-field="device_name"></td>
        <td class="control | right">
          <a class="button col btn m-1"
            data-hover="show"
            data-api-action="{id}"
            data-api-callback="remove"
            data-confirm="Remove peer session?"
            data-api-method="DELETE">
            <span class="icon fullctl icon-delete"></span>
          </a>
          <button class="btn m-1">
            <span class="icon icon-options"></span>
          </button>
        </td>
      </tr>
  </tbody>
  </table>
  </div>

  <div class="row">
    <a class="secondary col-md-auto btn d-flex ms-auto" data-element="btn_api_view" type="button" role="button" target="_blank">
      <div class="row align-items-center">
          <div class="col label pe-0">{% trans "API View" %}</div>
          <div class="col-auto">
              <span class="icon icon-api"></span>
          </div>
      </div>
    </a>
  </div>

  <div class="templates">
    <div data-template="menu"></div>

    {% include "peerctl/v2/tool/peering-summary-sessions/form-manual-session.html" %}
  </div>
</div>
